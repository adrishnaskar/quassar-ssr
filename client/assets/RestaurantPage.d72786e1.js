import{S as D,a as N,s as P,Q as d}from"./base-store.242fa715.js";import{Q as k}from"./QIcon.844f6ac4.js";import{_ as $}from"./plugin-vue_export-helper.21dcd24c.js";import{q as R,s as i,t as r,x as s,u as h,y as f,aa as j,r as T,ad as M,z as U,U as B,C as o,F as w,v as b,E as I,M as F,N as K}from"./index.1edd4ed6.js";import{R as L}from"./RatingComponent.97e340bb.js";import{c as q,i as C}from"./helpers.3ed3ec06.js";const G={class:"dish"},z={class:"upper-row"},Q={class:"name"},V={class:"price"},Z={key:0},J={class:"description"},W=R({__name:"DishComponent",props:{dish:{},originalTitle:{}},setup(a){return(t,e)=>(i(),r("div",G,[s("div",z,[s("div",Q,h(t.dish.name),1),s("div",V,h(t.dish.uniformPrice),1)]),t.originalTitle!=null?(i(),r("div",Z,"("+h(t.originalTitle)+")",1)):f("",!0),s("div",J,h(t.dish.description),1)]))}});var H=$(W,[["__scopeId","data-v-286790b6"]]);class X extends D{constructor(){super()}async getRestaurant(t){return await this.get(N.routes.restaurant.get+t)}}var Y=function a(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,l,p;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(l=n;l--!==0;)if(!a(t[l],e[l]))return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(p=Object.keys(t),n=p.length,n!==Object.keys(e).length)return!1;for(l=n;l--!==0;)if(!Object.prototype.hasOwnProperty.call(e,p[l]))return!1;for(l=n;l--!==0;){var _=p[l];if(!a(t[_],e[_]))return!1}return!0}return t!==t&&e!==e};const E="__googleMapsScriptId";var v;(function(a){a[a.INITIALIZED=0]="INITIALIZED",a[a.LOADING=1]="LOADING",a[a.SUCCESS=2]="SUCCESS",a[a.FAILURE=3]="FAILURE"})(v||(v={}));class g{constructor({apiKey:t,authReferrerPolicy:e,channel:n,client:l,id:p=E,language:_,libraries:S=[],mapIds:u,nonce:m,region:c,retries:y=3,url:x="https://maps.googleapis.com/maps/api/js",version:A}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=e,this.channel=n,this.client=l,this.id=p||E,this.language=_,this.libraries=S,this.mapIds=u,this.nonce=m,this.region=c,this.retries=y,this.url=x,this.version=A,g.instance){if(!Y(this.options,g.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(g.instance.options)}`);return g.instance}g.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?v.FAILURE:this.done?v.SUCCESS:this.loading?v.LOADING:v.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,e)=>{this.loadCallback(n=>{n?e(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id)){this.callback();return}const t=this.createUrl(),e=document.createElement("script");e.id=this.id,e.type="text/javascript",e.src=t,e.onerror=this.loadErrorCallback.bind(this),e.defer=!0,e.async=!0,this.nonce&&(e.nonce=this.nonce),document.head.appendChild(e)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},e)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}const O=a=>(F("data-v-8bfadc10"),a=a(),K(),a),ee={class:"container-parent"},te={class:"container"},se={class:"row"},ie={class:"col-12 restaurant-header"},re=O(()=>s("div",{class:"restaurant-image-wrapper"},[s("div",{class:"restaurant-image background-image-center"}),s("div",{class:"header-black"})],-1)),ae={class:"header-text-wrapper"},ne={class:"header-text-content"},oe={key:0},le={key:1},ce={class:"row"},he={class:"col-md-7 col-xs-12 left-content"},ue={key:0},de={key:0},pe={key:0,class:"dish-separator"},fe={key:1},ge={key:1},_e={class:"col-md-5 col-xs-12 right-content"},ve={key:0},me=O(()=>s("div",{id:"restaurant-map"},null,-1)),ye={class:"info-table"},ke={key:0},we=["href"],be={key:1},Ie={key:2},Ce=["href"],Se={key:0,class:"opening-table"},xe={key:1},Ee=R({__name:"RestaurantPage",setup(a){const t=j(),e=T(null);let n=t.params.id;M(n),U(X).getRestaurant(n).then(u=>{_(),e.value=u});const p=new g({apiKey:P.maps.key,version:"weekly"});function _(){p.load().then(async()=>{if(e.value==null)return;const u=await q("restaurant-map",{lat:e.value.restaurant.location.lat,lng:e.value.restaurant.location.lng},15);new google.maps.Marker({position:{lat:e.value.restaurant.location.lat,lng:e.value.restaurant.location.lng},map:u,title:e.value.restaurant.title})})}function S(u){if(e.value==null||e.value.originalTranslations==null)return null;for(let m of e.value.originalTranslations)if(m.id==u.id)return m.name;return null}return(u,m)=>(i(),r("div",ee,[s("div",te,[s("div",se,[s("div",ie,[re,s("div",ae,[s("div",ne,[e.value!=null?(i(),r("div",oe,[s("h1",null,h(e.value.restaurant.title),1),e.value.restaurant.totalScore!=null&&e.value.restaurant.reviewsCount!=null?(i(),B(L,{key:0,score:e.value.restaurant.totalScore,count:e.value.restaurant.reviewsCount},null,8,["score","count"])):f("",!0)])):(i(),r("div",le,[o(d,{width:"300px",height:"100px"})]))])])])]),s("div",ce,[s("div",he,[e.value!=null?(i(),r("div",ue,[s("h2",null,h(u.$t("restaurant-menu")),1),e.value.categories.length>0?(i(),r("div",de,[(i(!0),r(w,null,b(e.value.categories,c=>(i(),r("div",{key:c},[s("h3",null,h(c.name),1),(i(!0),r(w,null,b(c.dishes,(y,x)=>(i(),r("div",{key:y},[o(H,{class:"dish",dish:y,"original-title":S(y)},null,8,["dish","original-title"]),x<c.dishes.length-1?(i(),r("div",pe)):f("",!0)]))),128))]))),128))])):(i(),r("div",fe," We weren't able to find a menu for this restaurant. "))])):(i(),r("div",ge,[o(d,{width:"200px",height:"50px"}),(i(),r(w,null,b(4,c=>s("div",{key:c},[o(d,{width:"200px",height:"30px"}),o(d,{width:"100%",height:"30px"}),o(d,{width:"100%",height:"30px"})])),64))]))]),s("div",_e,[e.value!=null?(i(),r("div",ve,[me,s("table",ye,[!I(C)(e.value.restaurant.address)&&!I(C)(e.value.restaurant.url)?(i(),r("tr",ke,[s("td",null,[o(k,{size:"22px",name:"fa-solid fa-location-dot"})]),s("td",null,[s("a",{target:"_blank",rel:"nofollow",href:e.value.restaurant.url},h(e.value.restaurant.address),9,we),o(k,{name:"fa-solid fa-arrow-up-right-from-square"})])])):f("",!0),I(C)(e.value.restaurant.phone)?f("",!0):(i(),r("tr",be,[s("td",null,[o(k,{size:"22px",name:"fa-solid fa-phone"})]),s("td",null,h(e.value.restaurant.phone),1)])),I(C)(e.value.restaurant.website)?f("",!0):(i(),r("tr",Ie,[s("td",null,[o(k,{size:"22px",name:"fa-solid fa-globe"})]),s("td",null,[s("a",{target:"_blank",rel:"nofollow",href:e.value.restaurant.website},h(e.value.restaurant.website),9,Ce),o(k,{name:"fa-solid fa-arrow-up-right-from-square"})])]))]),e.value.restaurant.parsedOpeningHours.length>0?(i(),r("table",Se,[(i(!0),r(w,null,b(e.value.restaurant.parsedOpeningHours,c=>(i(),r("tr",{key:c},[s("td",null,h(c.day),1),s("td",null,h(c.hours.replace("-"," - ").replace(",",", ")),1)]))),128))])):f("",!0)])):(i(),r("div",xe,[o(d,{width:"100%",height:"200px"}),o(d,{width:"100%",height:"50px"}),o(d,{width:"100%",height:"50px"}),o(d,{width:"100%",height:"50px"})]))])])])]))}});var Pe=$(Ee,[["__scopeId","data-v-8bfadc10"]]);export{Pe as default};
